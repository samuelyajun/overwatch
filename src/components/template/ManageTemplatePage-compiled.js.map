{"version":3,"sources":["ManageTemplatePage.js"],"names":[],"mappings":"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","file":"ManageTemplatePage-compiled.js","sourcesContent":["import React, {PropTypes} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as templateActions from '../../actions/templateActions';\r\nimport TemplateForm from './TemplateForm';\r\nimport toastr from 'toastr';\r\n\r\nconst templateOuterDivStyle = {\r\n    marginTop: '75px'\r\n};\r\n\r\nclass ManageTemplatePage extends React.Component {\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        this.state = {\r\n            template: Object.assign({}, props.template),\r\n            errors: {},\r\n            saving: false\r\n        };\r\n\r\n        this.updateTemplateState = this.updateTemplateState.bind(this);\r\n        this.saveTemplate = this.saveTemplate.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (this.props.template.id != nextProps.template.id) {\r\n            this.setState({template: Object.assign({}, nextProps.template)});\r\n        }\r\n    }\r\n\r\n    updateTemplateState(event) {\r\n        const field = event.target.name;\r\n        let template = this.state.template;\r\n        template[field] = event.target.value;\r\n        return this.setState({template: template});\r\n    }\r\n\r\n    saveTemplate(event) {\r\n        event.preventDefault();\r\n        this.setState({saving: true});\r\n        this.props.actions.saveTemplate(this.state.template)\r\n            .then(() => this.redirect())\r\n            .catch(error => {\r\n                toastr.error(error);\r\n                this.setState({saving: false});\r\n            });\r\n    }\r\n\r\n    redirect() {\r\n        this.setState({saving: false});\r\n        toastr.success('Template Saved!');\r\n        this.context.router.push('/templates');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <TemplateForm\r\n                onChange={this.updateTemplateState}\r\n                onSave={this.saveTemplate}\r\n                template={this.state.template}\r\n                errors={this.state.errors}\r\n                saving={this.state.saving}\r\n            />\r\n        );\r\n    }\r\n\r\n}\r\n\r\nManageTemplatePage.propTypes = {\r\n    template: PropTypes.object.isRequired,\r\n    actions: PropTypes.object.isRequired\r\n};\r\n\r\nManageTemplatePage.contextTypes = {\r\n    router: PropTypes.object\r\n};\r\n\r\nfunction getTemplateById(templates, id) {\r\n    const template = templates.filter(template => template.id == id);\r\n    if(template.length) return template[0];\r\n    return null;\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps){\r\n    const templateId = ownProps.params.id;\r\n    let template = {id: '', watchHref: '', name: '', type: '', description: '', createDate: '', version: ''};\r\n\r\n    if(templateId && state.templates.length > 0) {\r\n        template = getTemplateById(state.templates, templateId);\r\n    }\r\n\r\n    return {\r\n        template: template\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        actions: bindActionCreators(templateActions, dispatch)\r\n    };\r\n}\r\n\r\n\r\nexport default  connect(mapStateToProps, mapDispatchToProps)(ManageTemplatePage);"]}